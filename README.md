# 手写数字识别作业说明
<a name="dZxwv"></a>
## 项目文件架构及说明
![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636232591-2792f44c-50af-4ff5-a287-1779976544af.png#align=left&display=inline&height=291&margin=%5Bobject%20Object%5D&name=image.png&originHeight=446&originWidth=524&size=29132&status=done&style=none&width=342)

- hwtrainset中储存原始的手写数字汉字图片，

![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636823246-1151e31d-aa8f-461d-b99a-095081b582e1.png#align=left&display=inline&height=69&margin=%5Bobject%20Object%5D&name=image.png&originHeight=138&originWidth=311&size=2392&status=done&style=none&width=155.5)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636834095-5405f6d1-ac01-4959-a887-ceb99dc9723f.png#align=left&display=inline&height=86&margin=%5Bobject%20Object%5D&name=image.png&originHeight=171&originWidth=287&size=3447&status=done&style=none&width=143.5)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636851741-19e4e863-e670-4f90-82c5-ae35ce747e3f.png#align=left&display=inline&height=89&margin=%5Bobject%20Object%5D&name=image.png&originHeight=178&originWidth=294&size=4629&status=done&style=none&width=147)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636862568-3f9cfa71-c78c-4a47-8787-bceaa0ac50ed.png#align=left&display=inline&height=102&margin=%5Bobject%20Object%5D&name=image.png&originHeight=204&originWidth=179&size=7432&status=done&style=none&width=89.5)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636873325-c32685c8-a467-4b77-b91a-0810145ae3cc.png#align=left&display=inline&height=114&margin=%5Bobject%20Object%5D&name=image.png&originHeight=227&originWidth=205&size=6330&status=done&style=none&width=102.5)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636890052-92db6d78-29f5-48f0-9490-eb875620d7cb.png#align=left&display=inline&height=102&margin=%5Bobject%20Object%5D&name=image.png&originHeight=204&originWidth=254&size=5551&status=done&style=none&width=127)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636898808-c2314c9b-207b-4f7e-b223-98fc34d94817.png#align=left&display=inline&height=113&margin=%5Bobject%20Object%5D&name=image.png&originHeight=225&originWidth=234&size=5818&status=done&style=none&width=117)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636908299-555894d9-0e8e-4747-bd3c-dc992a6df9dc.png#align=left&display=inline&height=82&margin=%5Bobject%20Object%5D&name=image.png&originHeight=163&originWidth=360&size=5200&status=done&style=none&width=180)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636920060-7e9833e0-089c-4d5d-9752-c460af966f2e.png#align=left&display=inline&height=89&margin=%5Bobject%20Object%5D&name=image.png&originHeight=177&originWidth=244&size=5053&status=done&style=none&width=122)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636932258-ae079fad-718c-4228-9615-bce9500b7a93.png#align=left&display=inline&height=113&margin=%5Bobject%20Object%5D&name=image.png&originHeight=226&originWidth=218&size=4548&status=done&style=none&width=109)

- 利用datapro.py对图像进行预处理。将图像转化为(64,64,3)的矩阵，对图像批量编号及分类，储存在raw_data文件夹中

![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592637075442-29b52976-2911-4f24-b558-22d77af99cc5.png#align=left&display=inline&height=145&margin=%5Bobject%20Object%5D&name=image.png&originHeight=289&originWidth=519&size=9480&status=done&style=none&width=259.5)<br />![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636360613-1441c6ba-b163-4f33-90ef-c0cf3efd61a5.png#align=left&display=inline&height=84&margin=%5Bobject%20Object%5D&name=image.png&originHeight=168&originWidth=166&size=6691&status=done&style=none&width=83)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636374789-d4247cc0-7f6a-4671-9340-d1cc3d68aff6.png#align=left&display=inline&height=83&margin=%5Bobject%20Object%5D&name=image.png&originHeight=166&originWidth=167&size=5199&status=done&style=none&width=83.5)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636393158-c399592a-63ff-4d3c-924f-3f6965765837.png#align=left&display=inline&height=83&margin=%5Bobject%20Object%5D&name=image.png&originHeight=165&originWidth=169&size=7030&status=done&style=none&width=84.5)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636326187-a2a89ea4-87ff-431f-8c3d-56e1c6931876.png#align=left&display=inline&height=87&margin=%5Bobject%20Object%5D&name=image.png&originHeight=173&originWidth=164&size=9084&status=done&style=none&width=82)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636414904-e7b45c62-910c-48e2-baf5-a1b625c19561.png#align=left&display=inline&height=82&margin=%5Bobject%20Object%5D&name=image.png&originHeight=164&originWidth=167&size=7427&status=done&style=none&width=83.5)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636429427-f0faa81e-0b40-4012-baf2-752414ab0e2c.png#align=left&display=inline&height=83&margin=%5Bobject%20Object%5D&name=image.png&originHeight=166&originWidth=169&size=6733&status=done&style=none&width=84.5)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636453320-016083a3-59bf-42c0-baa9-2a46252e8734.png#align=left&display=inline&height=81&margin=%5Bobject%20Object%5D&name=image.png&originHeight=161&originWidth=168&size=5918&status=done&style=none&width=84)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636466340-ab0a47ff-bc63-48e7-ba37-56202222b640.png#align=left&display=inline&height=83&margin=%5Bobject%20Object%5D&name=image.png&originHeight=166&originWidth=169&size=5607&status=done&style=none&width=84.5)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636479662-667d6afe-503c-4ec1-aadc-05a10e5fbeff.png#align=left&display=inline&height=83&margin=%5Bobject%20Object%5D&name=image.png&originHeight=165&originWidth=165&size=7356&status=done&style=none&width=82.5)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592636494002-06ff85ee-d8f0-443a-9160-3fdb7f86b5cd.png#align=left&display=inline&height=83&margin=%5Bobject%20Object%5D&name=image.png&originHeight=165&originWidth=166&size=5050&status=done&style=none&width=83)

- 利用test.py将图片打包成h5格式的数据集，方便后续训练模型时使用。得到data.h5数据集文件。
- 在cnn.ipynb中进行卷积神经网络的搭建和训练预测等。
<a name="sxKNg"></a>
## 训练过程及结果

- 配置了英伟达显卡驱动，训练中采用gpu加速训练过程。
```c
import os
os.environ["CUDA_DEVICE_ORDER"] = "PCI_BUS_ID"
os.environ['CUDA_VISIBLE_DEVICES'] = "0,1"
```
```c
config = tf.ConfigProto()
config.allow_soft_placement=True
config.gpu_options.per_process_gpu_memory_fraction=0.7
config.gpu_options.allow_growth = True
```

- 最终在训练集上精度为97.11%，测试集上精度为94%

![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592637478802-13c7a7b4-af63-4103-9873-be41367b0f95.png#align=left&display=inline&height=213&margin=%5Bobject%20Object%5D&name=image.png&originHeight=409&originWidth=442&size=63388&status=done&style=none&width=230)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592637487293-63165bc8-c6ab-4e02-b621-0717e3e886d9.png#align=left&display=inline&height=171&margin=%5Bobject%20Object%5D&name=image.png&originHeight=337&originWidth=492&size=25955&status=done&style=none&width=249)

- 成果展示

![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592637522763-5c24ef6a-f431-4d3d-b730-8533bfedb4cb.png#align=left&display=inline&height=182&margin=%5Bobject%20Object%5D&name=image.png&originHeight=363&originWidth=455&size=35175&status=done&style=none&width=227.5)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592637532153-8ff067e2-69e0-4a76-9659-11e9578cf686.png#align=left&display=inline&height=182&margin=%5Bobject%20Object%5D&name=image.png&originHeight=364&originWidth=459&size=32163&status=done&style=none&width=229.5)![image.png](https://cdn.nlark.com/yuque/0/2020/png/514705/1592637541961-ea3bb099-c995-4569-b9b8-8a816a9bc7ac.png#align=left&display=inline&height=177&margin=%5Bobject%20Object%5D&name=image.png&originHeight=354&originWidth=403&size=21566&status=done&style=none&width=201.5)<br />分别为训练集，测试集，和自己手写的图片。
